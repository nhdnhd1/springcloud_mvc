spring:
  cloud:
    gateway:
      discovery:
        locator:
          enabled: true #\u662F\u5426\u53EF\u4EE5\u901A\u8FC7\u5176\u4ED6\u670D\u52A1\u7684serviceId\u6765\u8F6C\u53D1\u5230\u5177\u4F53\u7684\u670D\u52A1\u5B9E\u4F8B\u3002\u9ED8\u8BA4\u4E3Afalse,\u4E3Atrue,\u81EA\u52A8\u521B\u5EFA\u8DEF\u7531,\u8DEF\u7531\u8BBF\u95EE\u65B9\u5F0F\uFF1Ahttp://Gateway_HOST:Gateway_PORT/\u5927\u5199\u7684serviceId/**\uFF0C\u5176\u4E2D\u5FAE\u670D\u52A1\u5E94\u7528\u540D\u9ED8\u8BA4\u5927\u5199\u8BBF\u95EE\u3002\u5982\u679C\u9700\u8981\u5C0F\u5199serviceId,\u5219\u914D\u7F6Espring.cloud.gateway.locator.lowerCaseServiceId:true
      routes:
      #\u5FAE\u670D\u52A1\u901A\u8FC7\u7F51\u5173\u8DEF\u7531
      - id: micro_route  #\u8DEF\u7531\u547D\u540D(\u5FAE\u670D\u52A1\u8DEF\u7531,\u901A\u8FC7\u7F51\u5173\u7684\u7AEF\u53E3\u8BBF\u95EE\u5FAE\u670D\u52A1)
        uri: lb://micro-server1 #\u8DEF\u7531\u5230\u5176\u4ED6\u670D\u52A1,url\u9700\u8981\u7528[lb://]+[serviceId]
        predicates:
        - Path=/sms/**  #\u8BF7\u6C42\u5730\u5740\u643A\u5E26/sms/\u7684\u5219\u8F6C\u53D1,\u4F8B\u5982\uFF1Ahttp://localhost:10000/sms/sendMsg?msg=abcd

      #\u5FAE\u670D\u52A1\u901A\u8FC7\u7F51\u5173\u8DEF\u7531\uFF08strip\u9664\u53BB\u524D\u7F00\uFF09
      - id: micro_strip_route  #\u8DEF\u7531\u547D\u540D(\u5FAE\u670D\u52A1\u8DEF\u7531,\u901A\u8FC7\u7F51\u5173\u7684\u7AEF\u53E3\u8BBF\u95EE\u5FAE\u670D\u52A1)
        uri: lb://micro-server1 #\u8DEF\u7531\u5230\u5176\u4ED6\u670D\u52A1,url\u9700\u8981\u7528[lb://]+[serviceId]
        predicates:
        - Path=/mygateway/sms/**  #\u8BF7\u6C42\u5730\u5740\u643A\u5E26/mygateway/sms/\u7684\u5219\u8F6C\u53D1,\u4F8B\u5982\uFF1Ahttp://localhost:10000/mygateway/sms/sendMsg?msg=abcd
        filters:
        - StripPrefix=1 #\u53BB\u9664\u8BF7\u6C42\u5730\u5740\u4E2D\u7684mygateway\uFF0C 1\u4EE3\u88681\u4E2A\u524D\u7F00

      #host\u8DEF\u7531
      - id: host_route #host\u8DEF\u7531
        uri: http://httpbin.org:80/get
        predicates:
        - Host=**.ssm.**

      #\u8BF7\u6C42\u53C2\u6570\u8DEF\u7531
      - id: query_route #\u8BF7\u6C42\u53C2\u6570\u8DEF\u7531
        uri: http://httpbin.org:80/get
        predicates:
          - Query=msg, zzz* #\u8BF7\u6C42\u53C2\u6570\u542B\u6709msg,\u4E14\u503C\u6EE1\u8DB3zzz\u5F00\u5934\u7684,\u5219\u8F6C\u53D1(\u5BF9\u503C\u7684\u5339\u914D\u53EF\u4EE5\u7701\u7565)\uFF0C\u4F8B\u5982\uFF1Ahttp://localhost:10000/?msg=zzzzzzz

      #\u8BF7\u6C42header\u8F6C\u53D1
      - id: header_route
        uri: http://httpbin.org:80/get
        predicates:
          - Header=request, \d+ # \u5982\u679C\u8BF7\u6C42\u5934\u542B\u6709request,\u4E14\u4E3A\u6570\u5B57,\u5219\u8F6C\u53D1\uFF0C\u4F8B\u5982\uFF1Ahttp://localhost:10000/

      #\u5224\u65ADcookie\u503C\uFF0C\u8F6C\u53D1
      - id: cookie_route
        uri: http://httpbin.org:80/get
        predicates:
          - Cookie=name, zzzgd # \u5982\u679C\u643A\u5E26cookie,\u53C2\u6570\u540D\u4E3Aname,\u503C\u4E3Azzzgd,\u5219\u8F6C\u53D1\uFF0C\u4F8B\u5982\uFF1Ahttp://localhost:10000/ \u5E76\u8BBE\u7F6Ecookie\u7684name=zzzgd

